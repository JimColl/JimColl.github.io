<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="James Matthew Coll">

  
  
  
    
  
  <meta name="description" content="Lab 8: Advanced Terrain Analysis Learning Objective In this lab we&rsquo;ll cover a variety of terrain analysis techniques including shelter analysis and a suite of tools within the hydrology toolbox.
What you need to submit Lab 8: Answer Sheet
Name:
Part 1
Question 1:
What is the value of the majority of the cells on the focalcells raster layer?
Where are the cells with smaller values located?
and why do they have smaller values?">

  
  <link rel="alternate" hreflang="en-us" href="https://jimcoll.github.io/courses/geog558/lab08/">

  


  

  
  
  
  <meta name="theme-color" content="#4caf50">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css" integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ==" crossorigin="anonymous">
    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Merriweather|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.5f8a892bbf54831e755facb704359ff8.css">

  

  
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://jimcoll.github.io/courses/geog558/lab08/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="Jim Coll">
  <meta property="og:url" content="https://jimcoll.github.io/courses/geog558/lab08/">
  <meta property="og:title" content=" | Jim Coll">
  <meta property="og:description" content="Lab 8: Advanced Terrain Analysis Learning Objective In this lab we&rsquo;ll cover a variety of terrain analysis techniques including shelter analysis and a suite of tools within the hydrology toolbox.
What you need to submit Lab 8: Answer Sheet
Name:
Part 1
Question 1:
What is the value of the majority of the cells on the focalcells raster layer?
Where are the cells with smaller values located?
and why do they have smaller values?"><meta property="og:image" content="https://jimcoll.github.io/img/icon-192.png">
  <meta property="twitter:image" content="https://jimcoll.github.io/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
    
  

  


  





  <title> | Jim Coll</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">Jim Coll</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/"><span>Main Website</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/geog358/"><span>GEOG 358</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/courses/geog558/"><span>GEOG 558</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/courses/random/"><span>Random</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      





<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/geog558/">Class Outline</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/geog558/classoutline/">Introduction and Syllabus</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/geog558"></a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/geog558/lab01/">Labs</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/courses/geog558/lab01/">Lab 1 - Data survey and database building</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab02/">Lab 2 - Cartographic Modeling</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab03/">Lab 3 - Focal Operations</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab04/">Lab 4 - Zonal Operations</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab05/">Lab 5 - Model Builder</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab06/">Lab 6 - Cost Distance, Region Groups, more Model Builder &amp; Python</a>
      </li>
      
      <li >
        <a href="/courses/geog558/lab07/">Lab 7 - Siting a New School with Model Builder and Fungus Dispersion Modeling</a>
      </li>
      
      <li class="active">
        <a href="/courses/geog558/lab08/">Lab 8 - Advanced Terrain Analysis</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
<ul>
<li><a href="#lab-8-advanced-terrain-analysis"><strong>Lab 8: Advanced Terrain Analysis</strong></a></li>
<li><a href="#learning-objective"><strong>Learning Objective</strong></a></li>
<li><a href="#what-you-need-to-submit"><strong>What you need to submit</strong></a></li>
<li><a href="#materials"><strong>Materials</strong></a></li>
<li><a href="#part-1-terrain-exposure-analysis"><strong>Part 1: Terrain Exposure Analysis</strong></a>
<ul>
<li><a href="#getting-set-up"><strong>Getting set up</strong></a></li>
<li><a href="#terrain-exposure-analysis-procedure"><strong>Terrain Exposure Analysis Procedure</strong></a></li>
</ul></li>
<li><a href="#part-2-creating-a-unit-hydrograph"><strong>Part 2: Creating a Unit Hydrograph</strong></a>
<ul>
<li><a href="#precondition-the-elevation-model"><strong>Precondition the elevation model</strong></a>
<ul>
<li><a href="#identify-and-fill-sinks"><strong>Identify and Fill Sinks</strong></a></li>
</ul></li>
<li><a href="#delineate-the-watershed"><strong>Delineate the Watershed</strong></a>
<ul>
<li><a href="#assess-flow-directions"><strong>Assess flow directions</strong></a></li>
<li><a href="#snap-outlet-to-stream"><strong>Snap outlet to stream</strong></a></li>
<li><a href="#delineate-watershed-upstream-of-outlet"><strong>Delineate watershed upstream of outlet</strong></a></li>
</ul></li>
<li><a href="#create-a-velocity-field"><strong>Create a velocity field</strong></a>
<ul>
<li><a href="#create-the-slope-raster"><strong>Create the slope raster</strong></a></li>
<li><a href="#calculate-the-slope-area-term"><strong>Calculate the slope-area term</strong></a></li>
<li><a href="#calculate-the-velocity-field"><strong>Calculate the velocity field</strong></a></li>
<li><a href="#limit-the-velocities"><strong>Limit the velocities</strong></a></li>
</ul></li>
<li><a href="#create-an-isochrone-map"><strong>Create an isochrone map</strong></a>
<ul>
<li><a href="#create-a-weight-grid"><strong>Create a weight grid</strong></a></li>
<li><a href="#assess-flow-time-to-outlet-pour-point"><strong>Assess flow time to outlet pour point</strong></a></li>
</ul></li>
<li><a href="#create-a-unit-hydrograph"><strong>Create a unit hydrograph</strong></a></li>
</ul></li>
</ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article" itemscope itemtype="http://schema.org/Article">

        <div class="docs-article-container">
          <h1 itemprop="name"></h1>

          <div class="article-style" itemprop="articleBody">
            

<h1 id="lab-8-advanced-terrain-analysis"><strong>Lab 8: Advanced Terrain Analysis</strong></h1>

<h1 id="learning-objective"><strong>Learning Objective</strong></h1>

<p>In this lab we&rsquo;ll cover a variety of terrain analysis techniques including shelter analysis and a suite of tools within the  hydrology toolbox.</p>

<h1 id="what-you-need-to-submit"><strong>What you need to submit</strong></h1>

<hr />

<p><strong>Lab 8: Answer Sheet</strong><br />
Name:</p>

<p><strong>Part 1</strong><br />
<strong>Question 1</strong>:<br />
What is the value of the majority of the cells on the focalcells raster layer?</p>

<p>Where are the cells with smaller values located?</p>

<p>and why do they have smaller values?</p>

<p><strong>Question 2</strong>:<br />
What is the value range in the shelter analysis raster layer?
________ to ________</p>

<p>A large positive value means:</p>

<p>A value close to zero means:</p>

<p>A small negative value means:</p>

<p><strong>Question 3</strong>:<br />
What is the interpretation of the sinks output?  What would the correct symbology of this layer look like?</p>

<p><strong>Question 4</strong>:
Paste your final unit hydrograph here.</p>

<hr />

<h1 id="materials"><strong>Materials</strong></h1>

<p><a href="https://kansas-my.sharepoint.com/:f:/g/personal/j610c377_home_ku_edu/EuXcVmpEfGZCnaEhU39f4woB4-h-1ZxBX-NHUJcVEsMonA?e=iKEEID">click to download</a><br />
<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;border-color:#ccc;margin:0px auto;}
.tg td{font-family:Arial, sans-serif;font-size:14px;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#fff;}
.tg th{font-family:Arial, sans-serif;font-size:14px;font-weight:normal;padding:10px 5px;border-style:solid;border-width:1px;overflow:hidden;word-break:normal;border-color:#ccc;color:#333;background-color:#f0f0f0;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
.tg .tg-btxf{background-color:#f9f9f9;border-color:inherit;text-align:left;vertical-align:top}
</style>
<table class="tg">
  <tr>
    <th class="tg-0pky">Relevant part</th>
    <th class="tg-0pky">Data Name</th>
    <th class="tg-0pky">Description</th>
  </tr>
  <tr>
    <th class="tg-0pky">Part01</th>
    <td class="tg-btxf">chase_dem</td>
    <td class="tg-btxf">DEM for Chase County, KS (30m cell size, elevation in feet)</td>
  </tr>
  <tr>
    <th class="tg-0pky">Part02</th>
    <td class="tg-btxf">Pour_point</td>
    <td class="tg-btxf">A point feature layer that depicts the outlet downstream of the Little River where you&rsquo;ll create a unit hydrograph.</td>
  </tr>
  <tr>
    <th class="tg-0pky">Part02</th>
    <td class="tg-btxf">Stowe_boundary</td>
    <td class="tg-btxf">A polygon feature layer that depicts the boundaries of Stowe, Vermont. This layer was derived from data available from <a href="https://vcgi.vermont.gov/">Vermont Center for Geographic Information (VCGI)</a></td>
  </tr>
  <tr>
    <th class="tg-0pky">Part02</th>
    <td class="tg-btxf">Stowe_DEM</td>
    <td class="tg-btxf">A raster layer that depicts elevation within the study area. It also has a resolution of 30 meters. It was derived from data made available by the <a href="https://www.usgs.gov/">United States Geological Survey (USGS)</a>.</td>
  </tr>
  <tr>
    <th class="tg-0pky">Part02_worked</th>
    <td class="tg-btxf">Stowe hydrology folder</td>
    <td class="tg-btxf">A worked version of part 2 in consideration of processing power</td>
  </tr>
</table></p>

<hr />

<div class="alert alert-note">
  <div>
    This lab, and part 2 in particular, can take a while when CPU is a limiting concern.  I can offer a few suggestions, and an alternative.</p>

<ul>
<li>Pick a smaller area to process.<br /></li>
<li>You can skip step if you are careful, as outlined in the instructions.</li>
<li>If you pause drawing that may speed up UI interactions <img src="/courses/geog558/media/PauseIcon.PNG" alt="" /></li>
<li>When not actively manipulation the tools you can multi-task.  Take the time to understand the workflow, fire off a process, and move onto something else.  Try not to have anything super intensive running in conjunction, but light Microsoft office work shouldn&rsquo;t break you.<br /></li>
<li>As a stopgap if it&rsquo;s taking too long, I have provided a copy of my part 2 for you to look over.  Use this only if needed.</li>
<li><a href="https://open.spotify.com/album/1Un2hgy3OUsbmmFNop3Pj2?si=oYzFtULARyqAQVSG66_pdw">A great album to jam to while working</a>.</li>
</ul>
  </div>
</div>

<h1 id="part-1-terrain-exposure-analysis"><strong>Part 1: Terrain Exposure Analysis</strong></h1>

<p>In this part of the lab, we will perform a terrain exposure analysis, referred to as shelter analysis.  The outputs of this workflow are quite popular in archeology studies and inform us as to how protected a given location is.</p>

<h2 id="getting-set-up"><strong>Getting set up</strong></h2>

<p>Start Arcmap and rename the data frame to Terrain Exposure Analysis.  Because we are working at a relatively small geographic scale, we should first reproject our raster from it&rsquo;s native projection (GSC_North_America_1983) to a more appropriate one for this analysis (NAD_1983_StatePlane_Colorado_South_FIPS_0503 WKID: 26955).</p>

<ul>
<li>Open ArcToolbox and navigate to <strong>Data Management Tools | Projections and Transformations | Raster | Project Raster</strong></li>
<li>For your Input raster select you <i>chase_dem</i> from your lab08\part01 folder using the browse button.

<ul>
<li>Here we use the browse button to avoid data locks on the elevation data and avoid inadvertently assigning a projection to the dataframe prematurely.</li>
</ul></li>
<li>Call the Output raster <i>proj_dem</i> saved in your lab08\part01 folder</li>
<li>To select an Output coordinate system, click on the Spatial Reference Properties Button (the hand with the card)</li>
<li>Define the coordinate system as:

<ul>
<li>Projected Coordinate Systems &gt; State Plane &gt; NAD 1983 (meters) &gt; NAD 1983 StatePlane Colorado South FIPS 0503 (meters).prj</li>
</ul></li>
<li>Click OK</li>
<li>Make sure that the Resampling technique is set to BILINEAR, and the cell size to 30m</li>
<li>Make sure your window looks like the one below (you may need to scroll down or resize the window)</li>
<li>Click OK</li>
</ul>

<p><img src="/courses/geog558/media/Lab8Image1.png" alt="" /></p>

<p>Finally, let&rsquo;s convert the elevation from feet to meters.</p>

<ul>
<li>Raster calculator: <i>1 foot = 0.3048 meters</i><br /></li>
<li>Name the output <i>chase_m</i><br /></li>
</ul>

<h2 id="terrain-exposure-analysis-procedure"><strong>Terrain Exposure Analysis Procedure</strong></h2>

<ul>
<li>Use <strong>Raster Calculator</strong> to create a constant raster layer on which all of the cells have a value of 1 <i>(“chase_m” / “chase_m”)</i>.</li>
<li>Make the output raster a permanent raster named <i>constant</i></li>
<li>Calculate the FOCALSUM on the <i>constant</i> raster layer using a circular neighborhood with a radius of 2 cell size</li>
<li>Save the output raster layer as <i>focalcells</i> in your part01 folder</li>
<li>Answer question #1 on your assignment sheet</li>
<li>Calculate the earth volume within the circular neighborhood (do a FOCALSUM operation using <i>chase_m</i> with a neighborhood radius of 2)</li>
<li>Save the output raster layer as <i>earthv1</i></li>
<li>Calculate the earth volume within the circular neighborhood assuming all the cells inside the neighborhood have the same Z value as the focus <b>(“chase_m” * “focalcells”)</b></li>
<li>Save the output raster layer as <i>earthv2</i></li>
<li>Calculate the shelter raster layer by subtracting <i>earthv2</i> from <i>earthv1</i>: <b>(“earthv1” – “earthv2”)</b></li>
<li>Save the output raster layer as <i>shelter</i></li>
<li>Answer question #2 on your assignment sheet</li>
</ul>

<h1 id="part-2-creating-a-unit-hydrograph"><strong>Part 2: Creating a Unit Hydrograph</strong></h1>

<blockquote>
<p>The instructions herein are guided by material gratefully pilfered from <a href="https://learn.arcgis.com/en/projects/predict-floods-with-unit-hydrographs/">https://learn.arcgis.com/en/projects/predict-floods-with-unit-hydrographs/</a></p>
</blockquote>

<p>As is the case with many locations across the globe, when disaster strikes planners and residents realize they have data gaps that they can not readily fill.  Exampled here, the town of Stowe in Vermont suffered considerably when the remnants of Hurricane Irene stuck the Green Mountain region in August 2011. The Little River overflowed and washed out roads, bridges, and culverts. In an effort to learn more about the event, officials tried to recreate the event using a number of techniques.  One way to do this is to construct a hydrograph, which are line graphs determining how much water a stream will discharge during a rainstorm. In this lesson, you&rsquo;ll create those hydrographs using data provided.  If you&rsquo;re interested in trying this for yourself I encourage you to download and run an area meaningful to you.  Refer back to lab 1 if you need a refresher on how to acquire elevation data.  The model builder is shown below:</p>

<p><img src="/courses/geog558/media/Lab8part2_ModelBuilder_Arcmap.PNG" alt="" /></p>

<h2 id="precondition-the-elevation-model"><strong>Precondition the elevation model</strong></h2>

<p>Either import the Stowe_DEM and Pour_point or download and select your own pour point for this analysis.</p>

<h3 id="identify-and-fill-sinks"><strong>Identify and Fill Sinks</strong></h3>

<p><strong>1)</strong> First, you&rsquo;ll identify sinks in your DEM. Although your DEM was derived from reliable data provided by the USGS, sinks may still be present. In order to identify them we need to know which way the water flows over the surface.  The first tool in the workflow is the <strong>Flow Direction</strong> tool.</p>

<ul>
<li>For Input surface raster, choose <i>Stowe_DEM</i>.<br /></li>
<li>save the output as <i>Stowe_flow_direction</i> in the geodatabase.<br /></li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image1arcmap.PNG" alt="" /></p>

<p>The symbology of the resulting layer corresponds to the direction water is likely to flow. The layer&rsquo;s appearance isn&rsquo;t important to this analysis, we just need this layer to run the next step&hellip;</p>

<p><strong>2)</strong> Open the <strong>sinks tool</strong>, the next step in the analysis.</p>

<ul>
<li>For Input D8 flow direction raster, choose <i>Stowe_flow_direction</i>.</li>
<li>Save the output as <i>Stowe_sinks</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image2arcmap.PNG" alt="" /></p>

<p><strong>3)</strong> The final step in the current task uses the <strong>Fill tool</strong> to remove sinks from a DEM.</p>

<ul>
<li>For Input surface raster, choose Stowe_DEM</li>
<li>Name the output <i>Stowe_fill</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image3arcmap.PNG" alt="" /></p>

<h2 id="delineate-the-watershed"><strong>Delineate the Watershed</strong></h2>

<p>Having now removed sinks from the DEM, it is considered &ldquo;hydrologically conditioned&rdquo; and is ready for hydrological analysis. We&rsquo;ll use this DEM to determine the watershed area for the outlet point south of Stowe (or wherever you want to drop your point!). A watershed area is the area in which all flowing water will flow toward a certain point—in this case, your outlet. With the watershed area, you&rsquo;ll be able to limit your subsequent analysis results to the relevant area for your outlet. Determining a watershed requires two components: a flow direction raster layer and an accurate outlet point. One of the most common reasons for a watershed analysis to fail is when the pour point is not adequately aligned to the flow grids.  For that reason the <strong>Snap Pour Point</strong> tool is often included in a workflow.  This step can be skipped if you are deliberate with your placement of the point, but I&rsquo;ll walk through the workflow using it here. First, you&rsquo;ll determine the stream&rsquo;s exact location by calculating the areas where water accumulates the most. Then, you&rsquo;ll snap the outlet point&rsquo;s location to match the stream and verify it.</p>

<h3 id="assess-flow-directions"><strong>Assess flow directions</strong></h3>

<p>The first step to delineate a watershed is to determine the direction that water will flow in your DEM. That way, you can determine the areas where water will flow to the outlet. To do so, you&rsquo;ll&hellip;</p>

<p><strong>1)</strong> Create another <strong>flow direction</strong> raster layer, this time for your DEM with filled sinks.</p>

<ul>
<li>For Input surface raster, choose <i>Stowe_fill</i>.</li>
<li>Name your output <i>Stowe_fill_flow_direction</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_FlowDirFill_arcmap.PNG" alt="" /></p>

<h3 id="snap-outlet-to-stream"><strong>Snap outlet to stream</strong></h3>

<p><strong>2)</strong> Open the <strong>Flow Accumulation tool</strong>. This tool creates a raster layer that indicates where water is most likely to accumulate. The flow accumulation for each cell is expressed as a numeric value based on the number of cells that flow into that cell. Cells with high values of accumulation often coincide with the locations of flowing water bodies. With your flow accumulation raster, you&rsquo;ll identify the Little River that flows through Stowe.</p>

<ul>
<li>For your Input flow direction raster, choose <i>Stowe_fill_flow_direction</i>.</li>
<li>Name your Output accumulation raster <i>Stowe_flow_accumulation</i>.</li>
<li>You&rsquo;ll leave the remaining parameters unchanged. The first of these parameters applies a weight to each cell, which is useful when you expect water to be distributed in ways that aren&rsquo;t uniform (for instance, in larger study areas where precipitation levels may vary significantly). The second parameter determines whether accumulation will be measured with integers or floating points. Floating point, the default value, allows for the inclusion of decimal places, making it more accurate in most situations. The third parameter determines the input flow direction.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_FillFlowAccumulation_Arcmap.PNG" alt="" /></p>

<p>The next step of the task opens the Measure Distance tool (which is a tool on the ribbon, not a geoprocessing tool). You&rsquo;ll use this tool to measure the distance between the current outlet point and the Little River&rsquo;s location as represented in the flow accumulation raster. You can use this distance to then snap the outlet point to the correct cell so that it precisely lines up with the stream. Be sure you&rsquo;re as precise as feasible by zooming in closer to the outlet point.  click the outlet point. Then double-click the approximate center of the nearest cell with a high flow accumulation value.  The Measure Distance tool&rsquo;s window updates to include the length of the measurement. I measurement approximately 50 meters so I&rsquo;ll round to a distance of 60 meters when I snap the outlet point to the stream. A snapping distance that is slightly higher than the measured distance will help avoid ambiguity in the tool. When deciding on a snapping distance, be sure it doesn&rsquo;t exceed the measured distance by too much, or the point may snap to an area further downstream.</p>

<p><img src="/courses/geog558/media/Lab8part2image_Measure_Arcmap.PNG" alt="" /></p>

<p><strong>3)</strong> Open up the <strong>Snap Pour Point</strong> tool.</p>

<ul>
<li>For Input raster or feature pour point data, choose <i>Pour_point</i>.</li>
<li>For Input accumulation raster, choose <i>Stowe_flow_accumulation</i>.<br /></li>
<li>Name the output raster <i>Stowe_snapped_outlet</i>.<br /></li>
<li>For Snap distance, type 60.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_SnapRas_Arcmap.PNG" alt="" /></p>

<p>The tool runs and the snapped outlet raster layer is added to the map. The raster displays a single cell that represents the outlet&rsquo;s new location. In the example image, the snapped outlet is represented as a yellow cell.</p>

<p><img src="/courses/geog558/media/Lab8part2image_SnapRasOutput_Arcmap.PNG" alt="" /></p>

<h3 id="delineate-watershed-upstream-of-outlet"><strong>Delineate watershed upstream of outlet</strong></h3>

<p>Now that you have both a flow direction layer and an accurate outlet layer, you can determine the watershed area upstream of the outlet.<br />
<strong>4)</strong> The final step of the task opens the <strong>Watershed tool</strong>.</p>

<ul>
<li>For Input D8 flow direction raster, choose <i>Stowe_fill_flow_direction</i>.</li>
<li>For Input raster or feature pour point data, choose <i>Stowe_snapped_outlet</i>.<br /></li>
<li>For Output raster, set the name to <i>Stowe_watershed</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_Watershed_Arcmap.PNG" alt="" /></p>

<h2 id="create-a-velocity-field"><strong>Create a velocity field</strong></h2>

<p>Next, you&rsquo;ll start determining how long it takes water to reach the outlet, allowing the town to better predict when flooding will occur during a hypothetical rainfall event. To determine the time it takes water to flow somewhere, you first need to determine how fast water flows. You&rsquo;ll calculate the speed of flowing water with a velocity field, another type of raster layer. There are many types of velocity fields, and they can be calculated with a wide variety of mathematical equations. You&rsquo;ll create a velocity field that is spatially variant, but time and discharge invariant. This means that your velocity field makes the following assumptions:</p>

<ul>
<li>Velocity is affected by spatial components such as slope and flow accumulation (spatially variant).</li>
<li>Velocity at a given location does not change over time (time invariant).</li>
<li>Velocity at a given location does not depend on the location&rsquo;s rate of water flow (discharge invariant).</li>
</ul>

<p>In reality, velocity could be time variant and would definitely be discharge variant. However, incorporating these variants would require additional datasets that might not be available and use modeling techniques that might not be replicable in a GIS environment. The spatially variant, time- and discharge-invariant velocity field will provide a generally accurate result, although it&rsquo;s important to remember that any method will be only an approximation of observed phenomena. You&rsquo;ll use a method for creating velocity fields first proposed by Maidment et al. (1996).<sup class="footnote-ref" id="fnref:1"><a href="#fn:1">1</a></sup> In this method, each cell in the velocity field is assigned a velocity based on the local slope and the upstream contributing area (the number of cells that flow into that cell, or flow accumulation). They use the following equation:</p>

<blockquote>
<p>V = V<sub>m</sub> * (s<sup>b</sup>A<sup>c</sup>) / (s<sup>b</sup>A<sup>c</sup><sub>m</sub>)</p>
</blockquote>

<p>Where:</p>

<ul>
<li>V is the velocity of a single cell with a local slope of s and an upstream contributing area of A.</li>
<li>Coefficients b and c can be determined by calibration.  In this scenario, you&rsquo;ll use the method&rsquo;s recommended value of b = c = 0.5.</li>
<li>V<sub>m</sub> is the average velocity of all cells in the watershed. You&rsquo;ll assume an average velocity of V<sub>m</sub> = 0.1 m/s.</li>
<li>s<sup>b</sup>A<sup>c</sup><sub>m</sub> is the average slope-area term throughout the watershed. To avoid results that are unrealistically fast or slow, you&rsquo;ll set limits for minimum and maximum velocities. The lower limit will be 0.02 meters per second, while the upper limit will be 2 meters per second.</li>
</ul>

<p>This equation is only one of many ways that a velocity field can be calculated, and it comes with several assumptions and limitations of its own.</p>

<h3 id="create-the-slope-raster"><strong>Create the slope raster</strong></h3>

<p>The primary variables in the equation you&rsquo;ll use for your velocity field are slope and upstream contributing area. You already have a raster layer for upstream contributing area: the flow accumulation layer you created above, but we don&rsquo;t yet have a slope layer, so that&rsquo;s the next one we&rsquo;ll create.<br />
<strong>1)</strong> Open the <strong>Slope tool</strong>.</p>

<ul>
<li>For the Input raster, choose <i>Stowe_DEM</i></li>
<li>Name your Output raster <i>Stowe_slope</i></li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_Slope_Arcmap.PNG" alt="" /></p>

<h3 id="calculate-the-slope-area-term"><strong>Calculate the slope-area term</strong></h3>

<p>Now that we have a raster layer for both slope and flow accumulation area, we&rsquo;ll calculate a new raster layer that combines them. This layer will show the slope-area term (the value s<sup>b</sup>A<sup>c</sup><sub>m</sub> from the Maidment et al. equation).</p>

<p><strong>2)</strong> The next step can be accomplished using the <strong>Raster Calculator tool</strong>.</p>

<ul>
<li>Use the fields to create the expression: <br><code>Float((&quot;Stowe_slope&quot; ^ 0.5) * (&quot;Stowe_flow_accumulation&quot; ^ 0.5))</code></li>
<li>Name your output raster <i>Stowe_slope_area_term</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_SlopeArea_Arcmap.PNG" alt="" /></p>

<ul>
<li>Finally, lets use the environments of this tool to clip to our watershed at the same time:
In the tool parameters, click <strong>Environments</strong>. Under <strong>Raster Analysis</strong> for <strong>Mask</strong>, choose <strong>Stowe_watershed</strong>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_SlopeArea_ArcmapEnvironments.PNG" alt="" /></p>

<p>Your output should look like so:</p>

<p><img src="/courses/geog558/media/Lab8part2image_SlopeAreaOutput_Arcmap.PNG" alt="" /></p>

<h3 id="calculate-the-velocity-field"><strong>Calculate the velocity field</strong></h3>

<p><strong>3)</strong> Now that you have the slope-area term, you can calculate a velocity field using the following equation:</p>

<blockquote>
<p>V = V<sub>m</sub> * (s<sup>b</sup>A<sup>c</sup>) / (s<sup>b</sup>A<sup>c</sup><sub>m</sub>)</p>
</blockquote>

<p>As mentioned previously,</p>

<ul>
<li>V<sub>m</sub> is the average velocity of all cells in the watershed. You&rsquo;ll use an assumed average value of V<sub>m</sub> = 0.1, which is recommended by Maidment et al.</li>
<li>Similarly, s<sup>b</sup>A<sup>c</sup><sub>m</sub> is the average slope-area term across the watershed. Because you&rsquo;ve calculated slope-area term for the watershed, we can simply pull the median out of our raster.  To find it you need to&hellip;</li>
</ul>

<p><strong>3A)</strong> right-click <strong>Stowe_slope_area_term</strong> and choose <strong>Properties</strong>, and under the <strong>Source</strong> tab and expand the <strong>Statistics</strong> heading.</p>

<p><img src="/courses/geog558/media/Lab8part2image_LayerStats_Arcmap.PNG" alt="" /></p>

<p><strong>3B)</strong> and then open a <strong>raster calculator</strong> and enter the expression, Where <strong>[Mean slope-area term]</strong> is the value that you copied from the <strong>Layer Properties</strong> window.:</p>

<ul>
<li>You expression should look like:<br><code>0.1 * (&quot;Stowe_slope_area_term&quot; / [Mean slope-area term])</code></li>
<li>Call that output Stowe_velocity_unlimited</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_VeloUnlimitTool_Arcmap.PNG" alt="" /></p>

<h3 id="limit-the-velocities"><strong>Limit the velocities</strong></h3>

<p>The raster layer you created is a velocity field, but it has unrealistically high and low velocities. For instance, some values in the field have a velocity of 0 meters per second, which is unlikely during an extreme rainfall event. Likewise, the maximum value of approximately 7.5 meters per second is unrealistic even during a major flood. You&rsquo;ll limit the velocity values with a lower limit of 0.02 meters per second and an upper limit of 2 meters per second.  Bearing in mind that there are a number of ways to end up with the desired output, the most direct in my opinion is a <a href="https://desktop.arcgis.com/en/arcmap/latest/tools/spatial-analyst-toolbox/conditional-evaluation-with-con.htm">complex raster calculator con expression</a>.  Other alternatives include reclassifying, multiple con tools, or a clamp tool to name a few.
<strong>4)</strong> Open up a <strong>Raster Calculator</strong> and enter your expression.</p>

<ul>
<li>My expression looks like so: <br><code>Con(&quot;Stowe_velocity_unlimited&quot; &lt; 0.02,0.02,Con(&quot;Stowe_velocity_unlimited&quot; &gt; 2,2,&quot;Stowe_velocity_unlimited&quot;))</code>

<ul>
<li>Read it from right to left: &ldquo;If &ldquo;Raster&rdquo; is less than x, put y, otherwise; if &ldquo;Raster&rdquo; is greater than than w, put z, otherwise put &ldquo;Raster&rdquo;&rdquo;</li>
</ul></li>
<li>Save your output as <i>Stowe_velocity</i>.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_VelocityClampExpression_Arcmap.PNG" alt="" /></p>

<h2 id="create-an-isochrone-map"><strong>Create an isochrone map</strong></h2>

<p>Having now created a velocity field that predicts how fast water will flow throughout Stowe, we still need to know the time it takes to get to the pour point.  In this step we&rsquo;ll create an isochrone map, which maps the time it takes to reach a specified location from anywhere else in an area. To create the isochrone map, you&rsquo;ll first create a weight grid. Then, you&rsquo;ll assess the time it takes for water to reach the outlet.</p>

<h3 id="create-a-weight-grid"><strong>Create a weight grid</strong></h3>

<p>Flow time is calculated with a relatively simple equation: The length that water must flow divided by the speed at which it flows. While you know how fast water flows due to your velocity field, you don&rsquo;t know flow length. To determine flow length, you need two variables: flow direction (which you know) and weight (which you don&rsquo;t). Weight, in regard to flow, represents impedance. For instance, water flowing through forested land takes longer than water flowing over smooth rock because it&rsquo;s impeded by terrain. While calculating weight may seem difficult without detailed terrain data, we can simplify our model by assuming that this weight is the inverse of the velocity we calculated.  This is more formally notated as</p>

<blockquote>
<p>Weight [L<sup>-1</sup>T] = 1 / Velocity [LT<sup>-1</sup>]</p>
</blockquote>

<p><strong>1)</strong> Thus, it is a simple matter to create our weights grid with a <strong>raster calculator</strong>.</p>

<ul>
<li>The raster calculator expression is:<br><code>1 / &quot;Stowe_velocity&quot;</code><br /></li>
<li>Save the output as <i>Stowe_weight</i></li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_WeightsTool_Arcmap.PNG" alt="" /></p>

<h3 id="assess-flow-time-to-outlet-pour-point"><strong>Assess flow time to outlet pour point</strong></h3>

<p><strong>2)</strong> The next step of the task uses the <strong>Flow Length</strong> tool. While this tool, as its name suggests, normally calculates flow length, it has an optional parameter to include a weight raster. When a weight raster is included, the tool calculates flow time instead.</p>

<ul>
<li>For Input flow direction raster, choose <i>Stowe_watershed_flow_direction</i>.</li>
<li>For Output raster, name it <i>Stowe_time</i>.</li>
<li>For Direction of measurement, confirm that <i>Downstream</i> is chosen.</li>
<li>For Input weight raster, choose <i>Stowe_weight</i>.</li>
<li>Finally, use the <strong>environments</strong> of the tool to clip to our watershed at the same time again.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_TimeToolAndEnviro_Arcmap.PNG" alt="" /></p>

<ul>
<li>Your output should look like so, and has units of seconds.</li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_TimeToolOutput_Arcmap.PNG" alt="" /></p>

<h2 id="create-a-unit-hydrograph"><strong>Create a unit hydrograph</strong></h2>

<p>The last step is to derive the graph of area/distance.  In essence, we want the histogram of the output layer.  Although conceptually simple, this can be quite difficult, as outlined in the source tutorial.  Fortunately, a simpler solution exists.  We will first&hellip;
<strong>1)</strong> Cast the raster to an int</p>

<ul>
<li>The input raster is <i>Stowe_time</i></li>
<li>Save the output as <i>Stowe_time_int</i></li>
</ul>

<p><img src="/courses/geog558/media/Lab8part2image_TimeInt_Arcmap.PNG" alt="" /></p>

<p><strong>2)</strong> Export our results.  We can export the raster as a table and use another software package to make a graph, or we can use ArcMap&rsquo;s built in graph maker to create a simple graph.<br />
<strong>2A)</strong> Open the attribute table and create a graph,<br />
<strong>2B)</strong> Set the axis value to value and the number of bins to something sane (I started with 35).  Click next and click finish.<br />
<strong>2C)</strong> Right click on the graph and change advanced properties, or export the image<br />
<strong>2D)</strong> A final graph.</p>

<p><img src="/courses/geog558/media/Lab8part2_UnitHydrography_Arc.PNG" alt="" /></p>

<p>Answer questions 3 and 4 related to this part of the lab.  Submit your final answer sheet to blackboard.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1">MAIDMENT, D.R., OLIVERA, F., CALVER, A., EATHERALL, A. and FRACZEK, W. (1996), UNIT HYDROGRAPH DERIVED FROM A SPATIALLY DISTRIBUTED VELOCITY FIELD. Hydrol. Process., 10: 831-844. doi:10.1002/(SICI)1099-1085(199606)10:6<a href="831::AID-HYP374">831::AID-HYP374</a>3.0.CO;2-N
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
</ol>
</div>

          </div>

          



          
        </div>

        <div class="body-footer">
          <p>Last updated on Jan 1, 0001</p>

          


          

        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>


      

    
    
    
    <script src="/js/mathjax-config.js"></script>
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS_CHTML-full" integrity="sha256-GhM+5JHb6QUzOQPXSJLEWP7R73CbkisjzK5Eyij4U9w=" crossorigin="anonymous" async></script>
      
    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js" integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log==" crossorigin="anonymous"></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.16bbb3750feb7244c9bc409a5a4fe678.js"></script>

    






  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
